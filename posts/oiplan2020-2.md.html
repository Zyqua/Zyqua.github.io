<!DOCTYPE html>
        <html>
            <head>
                <meta charset="utf-8"/>
                <title>n-kw && n-c by others</title>
                <link rel="stylesheet" type="text/css" href="../styles.css"/>
                <link rel="stylesheet" type="text/css" href="../markdownStyles.css"/>
                <script type="text/x-mathjax-config">
                    MathJax.Hub.Config({
                        extensions: ["tex2jax.js"],
                        jax: ["input/TeX", "output/HTML-CSS"],
                        tex2jax: {
                        inlineMath: [ ['$','$'] ],
                        displayMath: [ ['$$','$$'] ],
                        processEscapes: true
                        },
                        "HTML-CSS": { availableFonts: ["TeX"] }
                    });
                </script>
                <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
            </head>
            <body>
                <div class="body">
                <p class="title">striving & singing</p><p>按照计划，本周的学习重点依然是基础算法。</p>
<h3 id="2020-06-29">2020-06-29</h3>
<h4 id="noip2015销售员">[NOIP2015]销售员</h4>
<p><a href="https://www.luogu.com.cn/problem/P2672">https://www.luogu.com.cn/problem/P2672</a></p>
<p>这题很久以前写过，但有必要复习一下思路。</p>
<p>贪心，主要提供了另一种贪心的思路：在当前已有答案的基础上考虑新答案。至于在本题中为什么是正确的，似乎是用反证法但具体不会证，在考场上也没有必要证出来。</p>
<h4 id="noip2011聪明的质监员">[NOIP2011]聪明的质监员</h4>
<p><a href="https://www.luogu.com.cn/problem/P1314">https://www.luogu.com.cn/problem/P1314</a></p>
<p>二分加前缀和。二分很有必要重新复习一遍，之前在$SDOI2020$写$D1T1$时本来要写权值线段树+二分，结果写完线段树发现几个月没学$OI$不会写二分了，最后丢了$60$分，绝了(当然主要还是因为我太菜了)。</p>
<p>以前写二分都是设当前区间为$[l,r]$，经常写错，今天看了某大佬整理的二分写法(<a href="https://www.zhihu.com/question/36132386">https://www.zhihu.com/question/36132386</a> )，再重新总结一下。</p>
<p>二分的思路：当前区间为$[l,r)$，求出区间终点$\texttt{mid}$然后根据中点判断区间端点怎么移动。主要考虑这几个东西：</p>
<ol>
<li>搜索范围不为空，即循环条件为<code>l &lt; r</code>；</li>
<li>当前区间的左侧都要小于$v$；</li>
<li>当前区间的右侧都要大于$v$。</li>
<li>根据要求的值的位置，确定等于的条件放在$2$里面还是$3$里面。</li>
</ol>
<p>默认序列是非降序列，若序列为下降序列，把$2$和$3$倒过来即可。</p>
<p>这样，二分的思路就十分清晰明了了。另外，某些题比如这题中要求的是最接近于$v$的数而不是大于等于$v$的最小的数，这种情况可以二分求出大于等于$v$的最小的数后，在$l$与$l-1$之间取舍。</p>
<p>再来看这题，很容易看出来检验值关于$w$是单调的，然后$w=0$时$y$最大，$w &gt; maxw$时$y$最小，二分边界也就确定了。$y$的值可以用前缀和以$O(n+m)$复杂度求出。总复杂度$O((n+m)log\max{w_i})$。</p>
<p>还有就是，一定要仔细检查变量类型，第一次写完时很多地方忘了加$\texttt{long long}$。</p>
<p>相同难度下一写二分题就感觉这么得心应手，贪心题一直都对我很难啊。有时间还得继续加强练习。</p>
<pre><code class="language-cpp">#include&lt;cstdio&gt;

const int MAXN = 200100;
int n, m, w[MAXN], v[MAXN], l[MAXN], r[MAXN], maxw;
long long s, wsum[MAXN], vsum[MAXN];

inline long long min(long long a, long long b) { return a &lt; b ? a : b; }
inline int max(int a, int b) { return a &gt; b ? a : b; }
inline long long abs(long long x) { return x &gt; 0 ? x : -x; }
long long y(long long wx) {
    long long ans = 0;
    for (int i = 1; i &lt;= n; i++) {
        wsum[i] = wsum[i - 1] + (w[i] &gt;= wx ? 1 : 0);
        vsum[i] = vsum[i - 1] + (w[i] &gt;= wx ? v[i] : 0);
    }
    for (int i = 1; i &lt;= m; i++)
        ans += (wsum[r[i]] - wsum[l[i] - 1]) * (vsum[r[i]] - vsum[l[i] - 1]);
    return ans;
}

int main() {
    scanf(&quot;%d%d%lld&quot;, &amp;n, &amp;m, &amp;s);
    for (int i = 1; i &lt;= n; i++) scanf(&quot;%d%d&quot;, &amp;w[i], &amp;v[i]), maxw = max(maxw, w[i]);
    for (int i = 1; i &lt;= m; i++) scanf(&quot;%d%d&quot;, &amp;l[i], &amp;r[i]);
    long long lx = 1, rx = maxw + 1;
    while (lx &lt; rx) {
        long long mid = lx + (rx - lx) / 2;
        if (y(mid) &lt;= s) rx = mid;
        else lx = mid + 1;
    }
    printf(&quot;%lld\n&quot;, min(abs(y(lx) - s), abs(y(lx - 1) - s)));
    return 0;
}</code></pre>
<h3 id="2020-06-30">2020-06-30</h3>
<p>今晚太困了就早睡觉了，因为我每次刷题加上写总结至少得搞到$0$点以后，有时候$1$点或者最晚$2$点，然后$6$点半就得起来去学文化课，有点顶不住。</p>
<h3 id="2020-07-01">2020-07-01</h3>
<h4 id="shoi2015自动刷题机">[SHOI2015]自动刷题机</h4>
<p><a href="https://www.luogu.com.cn/problem/P4343">https://www.luogu.com.cn/problem/P4343</a></p>
<p>这题也是二分。感觉难度标得偏高了，我感觉绿题封顶，或者黄题。前天那题也是，绿题更合理一些。不过蓝题以下的luogu不管，我说了也没用。</p>
<p>显然$n$越大切的题少，然后直接做两次二分即可。</p>
<p>不过做这题时我看错了输出格式，无解的情况应该输出一个$-1$，我写成了输出两行每行一个$-1$，半个小时才调了出来，太菜了。</p>
<pre><code class="language-cpp">#include&lt;cstdio&gt;

int l, x[100100];
long long k;

inline int check(long long n) {
    long long y = 0;
    int cnt = 0;
    for (int i = 1; i &lt;= l; i++) {
        y += x[i];
        if (y &lt; 0) y = 0;
        else if (y &gt;= n) y = 0, cnt++;
    }
    return cnt;
}

int main() {
    scanf(&quot;%d%lld&quot;, &amp;l, &amp;k);
    for (int i = 1; i &lt;= l; i++) scanf(&quot;%d&quot;, &amp;x[i]);
    long long lx = 1, rx = 0x3fffffffffffffff;
    while (lx &lt; rx) {
        long long mid = lx + (rx - lx &gt;&gt; 1);
        if (check(mid) &lt;= k) rx = mid;
        else lx = mid + 1;
    }
    if (check(lx) ^ k) printf(&quot;-1\n&quot;);
    else {
        printf(&quot;%lld &quot;, lx);
        lx = 1, rx = 0x3fffffffffffffff;
        while (lx &lt; rx) {
            long long mid = lx + (rx - lx &gt;&gt; 1);
            if (check(mid) &lt; k) rx = mid;
            else lx = mid + 1;
        }
        printf(&quot;%lld\n&quot;, lx - 1);
    }
    return 0;
}</code></pre>
<h4 id="kotori的设备">kotori的设备</h4>
<p><a href="https://www.luogu.com.cn/problem/P3743">https://www.luogu.com.cn/problem/P3743</a></p>
<p>实数范围内的二分。注意精度，$\texttt{eps}$以后用$1^{-6}$，用$1^{-8}$某些点会超时。</p>
<pre><code class="language-cpp">#include&lt;cstdio&gt;

int n, p, a[100100], b[100100];
long long suma;
const double eps = 1e-6;

bool check(double t) {
    double sum = 0;
    for (int i = 1; i &lt;= n; i++)
        if (b[i] &lt; a[i] * t) sum += a[i] * t - b[i];
    return sum &lt;= t * p;
}

int main() {
    scanf(&quot;%d%d&quot;, &amp;n, &amp;p);
    for (int i = 1; i &lt;= n; i++) scanf(&quot;%d%d&quot;, &amp;a[i], &amp;b[i]), suma += a[i];
    if (suma &lt;= p) printf(&quot;-1\n&quot;);
    else {
        double l = eps, r = 1e10;
        while (r - l &gt; eps) {
            double mid = l + (r - l) / 2;
            if (check(mid)) l = mid + eps;
            else r = mid;
        }
        printf(&quot;%lf\n&quot;, l);
    }
    return 0;
}</code></pre>
<a href="../posts.html" class="link" style="display:block; text-align:center;">return</a>
</div>
</body>
</html>