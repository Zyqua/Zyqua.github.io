<!DOCTYPE html>
        <html>
            <head>
                <meta charset="utf-8"/>
                <title>blog</title>
                <link rel="stylesheet" type="text/css" href="../styles.css"/>
                <link rel="stylesheet" type="text/css" href="../markdownStyles.css"/>
                <script type="text/x-mathjax-config">
                    MathJax.Hub.Config({
                        extensions: ["tex2jax.js"],
                        jax: ["input/TeX", "output/HTML-CSS"],
                        tex2jax: {
                        inlineMath: [ ['$','$'] ],
                        displayMath: [ ['$$','$$'] ],
                        processEscapes: true
                        },
                        "HTML-CSS": { availableFonts: ["TeX"] }
                    });
                </script>
                <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>
            </head>
            <body>
                <div class="body">
                <p class="title">n-kw || n-c by others</p><p>华为光猫HG8120C破解过程。目的是获取超级管理员账户，修改光猫运行模式为桥接模式以达到端口映射的目的。</p>
<h3 id="本地网络情况">本地网络情况</h3>
<p>光猫下有两个LAN端口，其中<code>LAN1</code>连接路由器，路由器下连接电脑手机等设备。<code>LAN2</code>连接机顶盒，机顶盒下连接电视。光猫自带路由器功能，相当于两个路由器相连，因此需要多级映射才能做到端口映射。</p>
<h3 id="找到光猫后台页面">找到光猫后台页面</h3>
<p>通常后台地址会标注在光猫本体上，找到后把本地IP调成和光猫IP在同一网段，然后即可进入。</p>
<p>这个第一步就把我难住了，因为虽然光猫上写着IP地址是<code>192.168.100.1</code>，但输入了也进不去，把IP和光猫调成同一网段也不行，最后把电脑直接连上光猫并设置IP为<code>192.168.100.100</code>，默认网关设置成<code>192.168.100.1</code>就行了。</p>
<p>另外默认账户通常也标注在光猫上，可以进去看看，不过没什么好设置的东西，需要超级管理员账户才能设置更多。</p>
<h3 id="开启telnet功能">开启telnet功能</h3>
<p>首先你的电脑得安装好telnet，可以打开<code>cmd</code>，键入<code>telnet</code>，看有没有安装成功。</p>
<p>如果没有安装，打开电脑控制面板，找到<code>程序和功能</code>-&gt;<code>打开或关闭Windows功能</code>-&gt;<code>Telnet Client</code>，并勾选，然后就会开始安装。</p>
<p>安装完毕后，打开<code>cmd</code>，键入<code>Telnet 192.168.100.1</code>，如果失败，说明光猫已禁止<code>Telnet</code>指令，用下面的小工具破解。</p>
<p><a href="../source/files/hhww6.exe">hhww6.exe</a></p>
<p>杀毒软件可能会报毒，无视就好。</p>
<p>把光猫上的光纤拔下来，把电脑用网线和光猫直接连接，然后打开工具，选择<code>系统flash模式</code>为<code>大/小模式</code>，点击<code>启动</code>，等到光猫的所有指示灯常亮而不闪烁，点击<code>停止</code>，这时就可以使用<code>Telnet</code>指令登录光猫了。</p>
<h3 id="获取配置文件">获取配置文件</h3>
<p>打开<code>cmd</code>，键入<code>Telnet 192.168.100.1</code>，然后会让你输入账号密码，这时输入之前那个普通账户就可以了。</p>
<p>输入<code>shell</code>，开启控制台。如果进入了控制台，说明光猫的控制台没有被阉割。我家光猫的控制台被阉割了，无法使用控制台获取配置文件。使用下面的文件搭建FTP服务器。</p>
<p><a href="../source/files/tftp.exe">tftp.exe</a></p>
<p>打开<code>tftp.exe</code>，在<code>cmd</code>中键入：</p>
<p><code>backup cfg by tftp svrip 192.168.100.100 remotefile hw_ctree.xml</code></p>
<p>此指令可以将配置文件<code>hw_ctree.xml</code>保存在<code>tftp.exe</code>所在的文件夹下。</p>
<h3 id="解密配置文件">解密配置文件</h3>
<p>配置文件中保存了超级管理员账户密码，但是是被加密过的，需要使用下面的工具解密。</p>
<p><a href="../source/files/华为光猫配置文件加解密工具.exe">华为光猫配置文件加解密工具.exe</a></p>
<p>打开工具，<code>输入</code>那一栏选择配置文件<code>hw_ctree.xml</code>，输出文件名随便，格式必须是压缩包如<code>.zip</code>，<code>.gz</code>什么的。点击解密，得到压缩包，解压后得到<code>.xml</code>格式的文件，打开后发现里面的账户密码已经解密了。搜索<code>telecomadmin</code>就可以找到超级管理员账户的信息。</p>
<p>然而我这里解密后得到的是大小为0的空文件，我谔谔。网上有大神说这是因为文件本来就没加密。不过密码是一串乱码，显然需要某种办法来得到真正的密码。因为网上只找到了那一篇有关的信息，所以解密进程到这里就中断了。</p>
<p>最后我看到有破解完的大佬说他家光猫超级管理员密码是<code>admintelecom</code>，我就照着输了进去，成功进入后台(？？？)，并且比普通账户多了很多功能，可以确定是超级管理员账户。</p>
<p>最后总结一下，我家光猫超级管理员账号为<code>telecomadmin</code>，密码为<code>admintelecom</code>，如果按照以上方法无法破解的可以试试这个能不能进入。</p>
<h3 id="后记">后记</h3>
<p>获取到超级管理员账户后，成功开启了光猫桥接模式，理论上路由器的端口映射这时就可以正常工作了。然而经测试端口映射还是没有成功，最后发现路由器上被分配到的IP地址和查询到的公网IP地址不一致，说明我家网络被运营商<code>NAT</code>了，也就是你的IP看起来像是个公网IP，但实际上只是运营商分配给你的一个处于运营商构建的局域网中的一个内网IP，是无法端口映射的。这种情况只有找客服反馈然后让运营商给你一个公网IP。几个小时的努力功亏一篑。</p>
<p><strong>本文所有工具来自网络(部分来自吾爱破解网)，这篇文章更多的是分享这些工具及其用法，因为本来是要在淘宝上买的。参考资料：<a href="https://hiram.wang/huawei-hg8120c-telecomadmin-2018/">https://hiram.wang/huawei-hg8120c-telecomadmin-2018/</a></strong></p>
<p><strong>博客服务器在github，文件下载速度慢很正常，如果慢的话可以试试用迅雷下载，平常遇到下载速度慢的文件我都是用迅雷的。</strong></p>
<a href="../posts.html" class="link" style="display:block; text-align:center;">return</a>
</div>
</body>
</html>